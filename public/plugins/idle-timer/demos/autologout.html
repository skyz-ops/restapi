<!doctype html><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Jquery-idletimer : provides you a way to monitor user activity with a page."><title>Jquery-idletimer</title><script src=//code.jquery.com/jquery-1.11.0.min.js></script><script src=../src/idle-timer.js></script><link href=//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css rel=stylesheet><script src=//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/moment.js></script><link href=//netdna.bootstrapcdn.com/respond-proxy.html id=respond-proxy rel=respond-proxy><link href=respond.proxy.gif id=respond-redirect rel=respond-redirect><script src=respond.proxy.js></script><style>.bold{font-weight:700}body{margin-top:40px;margin-bottom:40px}</style><div class="navbar navbar-default navbar-fixed-top" role=navigation><div class=container><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=index.html>Jquery-idletimer</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href=index.html>Main Demo</a><li><a href=autologoutsync.html>Auto Logout Sync</a><li><a href=defaultbinding.html>Default Binding</a><li><a href=https://github.com/thorst/jquery-idletimer>Documentation</a></ul><ul class="nav navbar-nav navbar-right"><li><a href=https://github.com/thorst/jquery-idletimer/zipball/master>Zip</a><li><a href=https://github.com/thorst/jquery-idletimer/tarball/master>Tar</a><li><a href=https://github.com/thorst/jquery-idletimer>Github</a></ul></div></div></div><div class=container><h2>Concept</h2><p>Wait 10 seconds, you will see a expiring warning. Wait 10 more seconds and you will see that you have been logged out.<p>In the real world I forward them to the logout url, which intern fowards them to login screen, instead of showing the 2nd dialog. You can modify the session.logout function.<p>We could use the active.idleTimer event to clearTimeout, however I prefer the user to explicitly say they want to keep the session open by clicking ok, not just moving the mouse on the screen.<p>This demo takes into account when a mobile device closes the browser, and after the idle timeout expires, launches the browser again. Instead of displaying the warning, it will jump straight to the logged out dialog.<p>For the sake of complete demo, I've included the code needed to call a keepalive url to keep the server side session valid.</div><div class="modal fade" id=myModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true data-backdrop=static><div class=modal-dialog><div class=modal-content><div class=modal-header><h4 class=modal-title>Session Expiration Warning</h4></div><div class=modal-body><p>You've been inactive for a while. For your security, we'll log you out automatically. Click "Stay Online" to continue your session.<p>Your session will expire in <span class=bold id=sessionSecondsRemaining>120</span> seconds.</div><div class=modal-footer><button id=extendSession type=button class="btn btn-default btn-success" data-dismiss=modal>Stay Online</button> <button id=logoutSession type=button class="btn btn-default" data-dismiss=modal>Logout</button></div></div></div></div><div class="modal fade" id=mdlLoggedOut tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true data-backdrop=static><div class=modal-dialog><div class=modal-content><div class=modal-header><h4 class=modal-title>You have been logged out</h4></div><div class=modal-body><p>Your session has expired.</div><div class=modal-footer></div></div></div></div><script>!function(e){var n={inactiveTimeout:1e4,warningTimeout:1e4,minWarning:5e3,warningStart:null,warningTimer:null,logout:function(){e("#mdlLoggedOut").modal("show")},keepaliveTimer:null,keepaliveUrl:"",keepaliveInterval:5e3,keepAlive:function(){e.ajax({url:n.keepaliveUrl})}};e(document).on("idle.idleTimer",(function(i,t,a){var o=+new Date-a.lastActive-a.timeout,l=+new Date-o;o>=n.warningTimeout||l<=n.minWarning?e("#mdlLoggedOut").modal("show"):(e("#sessionSecondsRemaining").html(Math.round((n.warningTimeout-o)/1e3)),e("#myModal").modal("show"),n.warningStart=+new Date-o,n.warningTimer=setInterval((function(){var i=Math.round(n.warningTimeout/1e3-(+new Date-n.warningStart)/1e3);i>=0?e("#sessionSecondsRemaining").html(i):n.logout()}),1e3))})),n.keepaliveTimer=setInterval((function(){n.keepAlive()}),n.keepaliveInterval),e("#extendSession").click((function(){clearTimeout(n.warningTimer)})),e("#logoutSession").click((function(){n.logout()})),e(document).idleTimer(n.inactiveTimeout)}(jQuery)</script>